<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <title>Our superheroes</title>

    
  </head>

  <body>

    

    <script>
    import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import org.json.simple.JSONObject;
import org.json.simple.JSONArray;
import org.json.simple.parser.JSONParser;

class WebConnection{
	String json;
	WebConnection() throws Exception{
		String address = "http://openapi.airkorea.or.kr/openapi/services/rest/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?serviceKey=l%2FzPvuFgDbYOsgQY1kCLbjHytfR1nkkyR2KZVENTPtDNQR4AD0jG%2BvGf2fBA052nrh0HF4QJW%2FMFXxt2HKP5sg%3D%3D&numOfRows=1&pageNo=1&stationName=%EB%8F%99%EC%83%81%EB%8F%99&dataTerm=DAILY&ver=1.3&_returnType=json";
		BufferedReader br;
		URL url;
		HttpURLConnection conn;
		String protocol = "GET";

		url = new URL(address);
		conn = (HttpURLConnection)url.openConnection();
		conn.setRequestMethod(protocol);
		br = new BufferedReader(new InputStreamReader(conn.getInputStream()));

		json = br.readLine();
		//System.out.println(json);
	}
}

public class Main {
	public static void main(String[] args) throws Exception {
		WebConnection wc = new WebConnection();
		
		String json = wc.json;
		
		JSONParser parser = new JSONParser();
		JSONObject obj = (JSONObject)parser.parse(json);
		//JSONObject channel = (JSONObject)obj.get("channel");
		
		JSONArray item = (JSONArray)channel.get("list");
		for(int i=0;i<item.size();i++){
			JSONObject tmp = (JSONObject)item.get(i);
			String dataTime = ((String)tmp.get("dataTime")).replace("&lt;b&gt;", "").replace("&lt;/b&gt;", "");
			String khaiValue = (String)tmp.get("khaiValue");
			String pm25Value = (String)tmp.get("pm25Value");
			
			System.out.println("----- "+(i+1)+"번째 검색 결과 -----");
			System.out.println("측정시간 : "+dataTime);
			System.out.println("통합대기상태 : "+khaiValue);
			System.out.println("미세먼지 : "+pm25Value+"원");
		}
	}
}



    </script>
    
    
  </body>
</html>
